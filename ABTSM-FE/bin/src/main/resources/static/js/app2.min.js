function convertDate(e){var t=e.getFullYear().toString(),a=(e.getMonth()+1).toString(),s=e.getDate().toString(),n=a.split(""),i=s.split("");return t+"-"+(n[1]?a:"0"+n[0])+"-"+(i[1]?s:"0"+i[0])}function fnSend(e){if(!messagesendFlag)return!1;messagesendFlag=!1;var t=$("#messageText").val();if(null==t.trim())return messagesendFlag=!0,!1;if(""==t.trim())return messagesendFlag=!0,!1;var a={};a.api_key=e,a.text=t,a.context=JSON.stringify(conText);$.ajax({type:"POST",crossDomain:!0,cache:!1,url:"https://oe.aibril.com/api/v1.0/wrks/message/",dataType:"json",data:a,beforeSend:function(){$("#wsdk_talk_app").append("<p class='user'><span>"+t+"</span></p>"),$("#messageText").val("Loading..."),$("#messageText").attr("readonly",!0),$("#wsdk_talk_app").append("<p class='aibril'><span class='box'><span class='write'></span></span></p>")},success:function(e){var t="";for(var a in e.output.text)t+=e.output.text[a];""==t&&(t=anythingMsg);$("#wsdk_talk_app").find(".aibril .box").last().html("<span>"+t+"</span>"),conText=e.context},complete:function(){$("#messageText").val(""),$("#messageText").attr("readonly",!1),$("#wsdk_talk_app").scrollTop(9999),messagesendFlag=!0},error:function(e,t,a){$("#messageText").val(""),$("#messageText").attr("readonly",!1),alert("error"+JSON.stringify(e)),console.log(a)}})}!function(e){e.fn.extend({OEngine:function(t){t&&"object"==typeof t&&(t=e.extend({},e.OEngine.defaults,t)),this.each(function(){new e.OEngine(this,t)})}}),e.OEngine=function(t,a){void 0==a?(width="25%",height="100%",bgColor="#2e3951",ctitle="Aibril Chatbot",firstMsg="안녕하세요. Aibril Chatbot 입니다.",api_key=""):(width=void 0==a.width?"25%":a.width,height=void 0==a.height?"100%":a.height,bgColor=void 0==a.bgColor?"#2e3951":a.bgColor,ctitle=void 0==a.ctitle?"Aibril Chatbot":a.ctitle,firstMsg=void 0==a.firstMsg?"안녕하세요. Aibril Chatbot 입니다.":a.firstMsg,api_key=void 0==a.api_key?"":a.api_key),e(t).html('<div id="sidebar-wrapper" class="chatbotInner" >'),e("#sidebar-wrapper").append(e("<div/>",{class:"titArea",id:"style-2"})),e("#style-2").append("<p class='title'>Aibril  <span> A-Chat.</span></p>"),e("#sidebar-wrapper").append(e("<div/>",{class:"converArea",id:"style-3",text:""})),e("#style-3").append("<div id='wsdk_talk_app' class='converScr'></div>"),e("#wsdk_talk_app").append("<div id='wsdk_date' style='text-align: center;margin-bottom: 16px;'></div>"),e("#wsdk_date").append("<span id='wsdk_date_text'>Today , "+convertDate(todaysDate)+"</span>"),e("#wsdk_talk_app").append("<p class='aibril'><span class='box'><span>"+firstMsg+"</span></span></p>"),e("#sidebar-wrapper").append(e("<div/>",{id:"question_wrap",text:""})),e("#question_wrap").append("<div class='userInputArea'><input type='text' placeholder='질문을 입력하세요' id='messageText' ><a href='#none' class='enter' id='sendMessage'></a></div>"),e("#sendMessage").unbind("click").click(function(){fnSend(api_key)})},document.onkeypress=function(t){e.support.cors=!0;13==(void 0!==t?t.which:event.keyCode)&&fnSend(api_key)}}(jQuery);var conText,anythingMsg,todaysDate=new Date,messagesendFlag=!0;